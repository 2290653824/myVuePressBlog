

## 背景

我在使用mac的过程中，下载了一些如zookeeper、redis等软件，但是每次启动的时候，

- 我可能需要重新去对应的路径下使用shell命令启动一次。
- 长时间不用，下一次需要使用可能会忘记安装的路径在哪里，可能会忘记启动命令是什么。



如果我们可以让电脑在开机时能够自行启动，那么以上的问题都可以轻松的解决



## 一.systemd系统

使用`ps -ef | grep systemd`查看是否是systemd系统

![image-20230225150627147](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedundefinedimage-20230225150627147.png)

### 自启举例

linux很多都是用过systemd来进行开机执行的shell

例如以下命令大家有可能都是用过：

```shell
#启动：
sudo systemctl start httpd
#重启：
sudo systemctl restart httpd
#停止：
sudo systemctl stop httpd
#设置开机启动：
sudo systemctl enable httpd
```

那如果我们也想要编写一个shell脚本，让开机的时候能够自行启动的话呢？

### 步骤

1. 首先，我们需要先写好我们对应的开机脚本，并cd到对应的文件目录

例如: 

```shell
cd /home/tommy
```



2. 编写相关的service文件（重要）

只需要修改 ExecStart 和 ExecReload 等为你需要执行的 shell 脚本即可

```shell
[Unit]
Description=
Documentation=
After=network.target
Wants=
Requires=

[Service]
ExecStart=/home/downey/test.sh  # 使用start命令时使用的脚本
ExecStop=
ExecReload=/home/downey/test.sh # 机器重启时使用的脚本
Type=simple

[Install]
WantedBy=multi-user.target
```

3. 将 service 脚本放到 /etc/systemd/system/ 或者 /usr/lib/systemd/system 目录

   ```
   cp /路径/test.sh /etc/systemd/system/
   ```

4. 测试启动

```shell
sudo systemctl start test.service
```

5. 添加开机启动

```
sudo systemctl enable test.service
```

6. 重启检查一下 设置是否生效

```
reboot
```

7. 查看systemd服务状态

```shell
ps -ef|grep test.service
```



## 二.mac系统



1. 编写一个shell脚本
2. 修改shell文件的脚本为

```shell
sudo chmod 777 run.sh
```

3. 






























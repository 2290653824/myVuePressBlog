---
title: 抽象工厂模式
date: 2023-01-02 19:16:22
permalink: /pages/a1d18f/
categories:
  - 设计模式
  - 创建型模式
tags:
  - 
author: 
  name: xugaoyi
  link: https://github.com/xugaoyi

---

## 为什么会有抽象工厂模式

工厂方法模式通过引入工厂等级结构， 解决了简单工厂模式中工厂类职责太重的问题， 但由于工厂方法模式中的每个工厂只生产一类产品， 可能会导致系统中存在大量的工厂类， 势必会增加系统的开销

**模式动机**

- 产品等级结构：产品等级结构即产品的继承结构
- 产品族：在抽象工厂模式中，产品族是指由同一个工厂生产的，位于不同产品等级结构中的一组产品，如海尔电器工厂生产的海尔电视机、海尔电冰箱，海尔电视机位于电视机产品等级结构中，海尔电冰箱位于电冰箱产品等级结构中。 

![image-20230102191901977](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230102191901977.png)

抽象工厂模式与工厂方法模式最大的区别在于，工厂方法模式针对的是一个产品等级结构，而抽象工厂模式则需要面对多个产品等级结构，一个工厂等级结构可以负责多个不同产品等级结构中的产品对象的创建 ，抽象工厂模式比工厂方法模式更为简单、有效率。

每一个具体工厂可以生产属于一个产品族的所有产品， 例如生产颜色相同的正方形、 圆形和椭圆形， 所生产的产品又位于不同的产品等级结构中。 如果使用工厂方法模式， 图4所示结构需要提供15个具体工厂， 而使用抽象工厂模式只需要提供5个具体工厂

![image-20230102191946106](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230102191946106.png)

## 定义

 抽象工厂模式(Abstract Factory Pattern)：提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类。抽象工厂模式又称为Kit模式，属于对象创建型模式。

## 结构

![image-20230102192046541](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230102192046541.png)



- AbstractFactory：抽象工厂
- ConcreteFactory：具体工厂
- AbstractProduct：抽象产品
- Product：具体产品

具体工厂可以看做华为、苹果、小米

具体产品看做是手机、电脑、电视



华为具体工厂可以创建华为手机、华为电脑、华为电视



## 优缺点

### 优点

- 抽象工厂模式隔离了具体类的生成，使得客户并不需要知道什么被创建。由于这种隔离，更换一个具体工厂就变得相对容易。所有的具体工厂都实现了抽象工厂中定义的那些公共接口，因此只需改变具体工厂的实例，就可以在某种程度上改变整个软件系统的行为。另外，应用抽象工厂模式可以实现高内聚低耦合的设计目的，因此抽象工厂模式得到了广泛的应用。
- 当一个产品族中的多个对象被设计成一起工作时，它能够保证客户端始终只使用同一个产品族中的对象。这对一些需要根据当前环境来决定其行为的软件系统来说，是一种非常实用的设计模式。
- 增加新的具体工厂和产品族很方便，无须修改已有系统，符合“开闭原则”。

### 缺点

- 在添加新的产品对象时，难以扩展抽象工厂来生产新种类的产品，这是因为在抽象工厂角色中规定了所有可能被创建的产品集合，要支持新种类的产品就意味着要对该接口进行扩展，而这将涉及到对抽象工厂角色及其所有子类的修改，显然会带来较大的不便。
- 开闭原则的倾斜性（增加新的工厂和产品族容易，增加新的产品等级结构麻烦）



# 云服务

## **弹性公网IP**

弹性公网IP（Elastic Public IP）是一种云计算服务提供商（如AWS、阿里云等）提供的公网IP地址。

特点：

1. 动态绑定和解绑：弹性公网IP可以动态地绑定到云服务中的实例或资源上，而不需要手动配置和更改网络设置。这使得你可以方便地将公网IP地址分配给不同的资源，以适应不同的需求。
2. 可迁移性：弹性公网IP可以在不同的实例或资源之间进行迁移和转移，而无需更改IP地址。这为资源的弹性部署和管理提供了灵活性和便利性。
3. 高可用性：弹性公网IP通常与云服务提供商的高可用性机制结合使用，以确保在故障或维护期间仍然能够提供稳定的公网访问。当发生故障或维护时，弹性公网IP可以自动地转移到备用实例或资源上，以保持持续的网络连接。
4. 计费灵活：弹性公网IP的计费通常基于使用时长和带宽消耗，可以根据实际需求进行灵活的付费方式。这使得你可以根据资源的实际使用情况进行成本控制和优化。



案例：
假设你在云平台上运行了一个具有高可用性要求的Web应用程序。为了使该应用程序能够通过公网访问，你需要将公网IP地址分配给应用程序的实例。

在这种情况下，你可以使用弹性公网IP来实现：

1. 创建实例：首先，在云平台上创建应用程序的实例，例如一台虚拟机（云服务器）。
2. 分配弹性公网IP：然后，从云平台上申请一个弹性公网IP地址，并将其绑定到你的实例上。这样，你的应用程序就可以通过这个公网IP地址进行访问。
3. 高可用性保障：如果你的实例发生故障或需要进行维护，你可以通过解绑弹性公网IP，将它重新绑定到备用实例上。这样，在故障期间，你的应用程序仍然可以通过公网IP地址访问，而无需更改访问配置。
4. 弹性扩展：如果你的应用程序需要扩展，你可以创建更多的实例，并将弹性公网IP地址动态地绑定到这些新实例上。这样，你可以根据流量需求来调整实例的数量，并通过公网IP地址提供无缝的访问。





## 负载均衡

## vpc

专有网络VPC（Virtual Private Cloud）**是您云服务构建的一个隔离的网络环境，专有网络之间逻辑上彻 底隔离**。 能够在自己定义的虚拟网络中使用资源。 可以完全掌控自己的虚拟网络，例如选择自己的IP地址范围、划分网段、配置路由表和网关等，从而实现安 全而轻松的资源访问和应用程序访问。

创建示例：

- 在平台上创建一个vpc：指定vpc名称、IP地址范围和其他参数。例如，创建一个名为"my-vpc"的VPC，IP地址范围为192.168.0.0/16。

- 在对应的vpc下创建子网：在VPC内创建子网，用于划分不同的网络区域。指定子网的名称、IP地址范围、所属的可用区等。例如，创建一个名为"public-subnet"的子网，IP地址范围为192.168.1.0/24，可用区为us-east-1a。
- 配置路由表：创建路由表用于定义子网之间的路由规则。将子网与路由表关联，以确定子网的出站流量走向。例如，创建一个名为"public-route-table"的路由表，并将"public-subnet"与该路由表关联

> 路由表起着重要的作用，用于管理子网之间的网络流量转发。专有网络的路由表决定了数据包在网络中如何传输，即确定了数据包从源子网到目标子网的路径

![img](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/zh-cn_image_0301367870.png)

1. 公共子网：创建一个公共子网，其中包含前端Web服务器。该子网与Internet网关相连，使得Web服务器能够接收来自公共Internet的用户请求。
2. 私有子网：创建一个私有子网，其中包含应用服务器和数据库服务器。该子网没有直接的Internet连接，只能通过内部网络进行通信。
3. 路由表配置：配置路由表，将公共子网的流量指向Internet网关，使得用户可以通过Web服务器访问应用。同时，配置路由表将私有子网的流量指向应用服务器和数据库服务器，使得它们能够进行内部通信。

参考:[VPC](https://www.jianshu.com/p/ba523fc1bd39)

## 安全组

可以简单的理解为防火墙

安全组是一个逻辑上的分组，为具有相同安全保护需求并相互信任的云服务器、云容器、云数据库等实例提供访问策略。安全组创建后，用户可以在安全组中定义各种访问规则，当实例加入该安全组后，即受到这些访问规则的保护。

安全组规则遵循白名单规则，具体说明如下：

- 入方向规则：入方向指外部访问安全组内实例的指定端口。当外部请求匹配上安全组中入方向规则的源地址，并且策略为“允许”时，允许该请求进入，其他请求一律拦截。

  因此，如果没有特殊需求，您一般不用在入方向配置策略为“拒绝”的规则，因为不匹配“允许”规则的请求均会被拦截。

- 出方向规则：出方向指安全组内实例访问外部的指定端口。在出方向中配置目的地址匹配所有IP地址的规则，并且策略为“允许”时，允许所有的内部请求出去。

| 规则类别   | 策略 | 类型 | 协议端口 | 源地址/目的地址        | 描述                                                         |
| ---------- | ---- | ---- | -------- | ---------------------- | ------------------------------------------------------------ |
| 入方向规则 | 允许 | IPv4 | TCP:22   | 源地址：0.0.0.0/0      | 针对TCP(IPv4)协议，允许外部所有IP访问安全组内云服务器的SSH(22)端口，用于远程登录Linux云服务器。 |
| 出方向规则 | 允许 | IPv4 | TCP:80   | 目的地址：10.7.6.51/32 | 针对TCP(IPv4)协议，允许安全组内云服务器可访问外部IP(10.7.6.51)的80端口。 |


![img](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/zh-cn_image_0285458112.png)



## 容灾

# openstack

### 简介



​	OpenStack是一个旨在为公共及私有云的建设与管理提供软件的开源项目。它不是一个软件，而是由几个主要的组件组合起来完成一些具体的工作。

​	OpenStack旨在构建一个内核，所有的软件厂商都围绕着它进行工作。OpenStack的许多子项目，对云计算平台中的各种资源(如计算能力、存储、网络)提供敏捷管理。此外，OpenStack也提供对虚拟化技术的支持。帮我们建立自己的IaaS，提供类似Amazon Web Service的服务给用户OpenStack 提供的主要服务包括：

> - IaaS 是云服务的最底层，主要提供一些基础资源。它与 PaaS 的区别是，用户需要自己控制底层，实现基础设施的使用逻辑
>
> - PaaS 提供软件部署平台（runtime），抽象掉了硬件和操作系统细节，可以无缝地扩展（scaling）。开发者只需要关注自己的业务逻辑，不需要关注底层
>
> - SaaS 是软件的开发、管理、部署都交给第三方，不需要关心技术问题，可以拿来即用

- **Nova**：计算服务，用于提供虚拟机和物理主机资源。
- **Swift**：对象存储服务，用于存储和检索数据。
- **Cinder**：是存储管理的组件。Cinder存储管理主要是指虚拟机的存储管理。
- **Neutron**：网络服务，提供网络连接性，包括虚拟网络、路由器、负载均衡器等。【Quantum是网络管理的组件。上面介绍nova的时候，说过网络相关的内容，都会交给Quantum。】
- **Glance**：虚拟机镜像查找及检索系统，实现虚拟机镜像管理的镜像存储
- **Keystone**：身份服务，提供认证和授权功能。
- **Horizon**：为所有OpenStack的服务提供了一个模块化的web-based用户界面。使用这个Web GUI，可以在云上完成大多数的操作，如启动实例，分配IP地址，设置访问控制等。

### openstack与k8s对比

OpenStack和Kubernetes（简称K8s）是两个不同的云计算技术，各自具有不同的功能和定位。以下是OpenStack和Kubernetes之间的主要区别：

1. 功能定位：
   - OpenStack：OpenStack是一个完整的云计算平台，旨在提供基础设施即服务（Infrastructure as a Service，IaaS）功能，包括计算、网络、存储和身份认证等服务。它专注于提供虚拟化资源和管理能力，用于构建和管理私有云和公有云环境。
   - Kubernetes：Kubernetes是一个容器编排平台，旨在简化和自动化容器化应用程序的部署、扩展和管理。它提供了容器编排、服务发现、负载均衡、自动伸缩等功能，用于构建和管理容器化的应用程序。
2. 技术领域：
   - OpenStack：OpenStack主要关注基础设施层的管理，提供了各种虚拟机实例、网络、存储等资源的管理和分配。
   - Kubernetes：Kubernetes主要关注容器编排和管理，提供了容器的自动化部署、伸缩、治理和服务发现等特性。
3. 资源抽象：
   - OpenStack：OpenStack通过虚拟机实例、卷、网络等资源来进行管理和分配，提供了更传统的虚拟化解决方案。
   - Kubernetes：Kubernetes通过容器来进行管理和部署应用程序，充分利用容器化技术的轻量、可移植和可扩展特性。
4. 应用场景：
   - OpenStack：OpenStack适用于构建和管理大规模的私有云和公有云基础设施，提供多种基础设施服务，如虚拟机、网络、存储等，适用于各种应用场景。
   - Kubernetes：Kubernetes适用于容器化应用程序的部署和管理，特别是在微服务架构和容器化部署模式中，支持应用程序的弹性伸缩、容错性和自动化管理。

综上所述，OpenStack和Kubernetes在功能定位、技术领域和应用场景上存在明显的差异。OpenStack专注于提供云基础设施服务，而Kubernetes专注于容器编排和管理。在实际应用中，两者可以结合使用，通过OpenStack提供底层基础设施支持，再使用Kubernetes来管理和运行容器化的应用程序。



学习参考：

https://bbs.huaweicloud.com/blogs/194512



https://www.xjimmy.com/study_openstack

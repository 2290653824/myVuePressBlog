[https://blog.csdn.net/qq_35462323/article/details/105724468](https://blog.csdn.net/qq_35462323/article/details/105724468)



## free命令

查看内存使用情况

```shell
free -m 
free -h
free -k
```

通常使用free -h的格式可以看到更符合人行为的内存大小

一般会展示出下面的情况：

```shell
#free
             total       used       free     shared    buffers     cached
Mem:      16467424   15696636     770788          0     158636    7059612
-/+ buffers/cache:    8478388    7989036
Swap:            0          0          0
```

每一列的特殊含义：

- total：物理内存大小，就是机器实际的内存
- used：已使用的内存大小，这个值包括了 cached 和 应用程序实际使用的内存
- free：未被使用的内存大小
- shared：共享内存大小，是进程间通信的一种方式
- buffers：被缓冲区占用的内存大小
- cached：被缓存占用的内存大小

对于Mem对应的行：total = used + free

下面一行，代表应用程序实际使用的内存：

前一个值表示 - buffers/cached，即 used - buffers/cached，表示应用程序实际使用的内存。
后一个值表示 + buffers/cached，即 free + buffers/cached，表示理论上都可以被使用的内存。
这两个值相加=total



什么是swap

操作系统 进程识别的是虚拟内存地址。每个物理内存都有一个或多个虚拟内存进行对应



内存分页：

什么使用分页

通过上面对虚拟内存的介绍得知，操作系统必须能高效地翻译虚拟内存和物理内存地址映射。
Linux采用了分页（paging）的方式来记录对应关系。
所谓的分页，就是以更大尺寸的单位页（page）来管理内存。
内存分页，可以极大地减少所要记录的内存对应关系。我们已经看到，以字节为单位的对应记录实在太多。如果把物理内存和进程空间的地址都分成页，内核只需要记录页的对应关系，相关的工作量就会大为减少。



linux中内存页是多大？

```shell
getconf PAGE_SIZE
```



当物理内存大小不够时，会将部分页(暂时未使用)暂存到磁盘上。swap字面意思就是交换，指硬盘上一块分区或者文件。

使用`swapon -s `可以查看当前系统上正在使用的交换空间清单

```shell
[root@PCS101 ~]# swapon -s
Filename                Type        Size    Used    Priority
/dev/dm-1                               partition    16777208    0    -1
```

当然，以上在你物理内存足够的情况下应该不会显示什么。



## mkswap指令

创建交换区

Linux mkswap命令用于设置交换区(swap area)。

mkswap可将磁盘分区或文件设为Linux的交换区。

```shell
mkswap [-cf][-v0][-v1][设备名称或文件][交换区大小]
```

- -c 建立交换区前，先检查是否有损坏的区块。
- -f 在SPARC电脑上建立交换区时，要加上此参数。
- -v0 建立旧式交换区，此为预设值。
- -v1 建立新式交换区。
- [交换区大小] 指定交换区的大小，单位为1024字节。



## swapon指令

Linux swapon命令用于激活Linux系统中交换空间，Linux系统的内存管理必须使用交换区来建立虚拟内存。

相关语法：

```shell
/sbin/swapon -a [-v]
/sbin/swapon [-v] [-p priority] specialfile ...
/sbin/swapon [-s]
```

- -h 请帮帮我
- -V 显示版本讯息
- -s 显示简短的装置讯息
- -a 自动启动所有SWAP装置
- -p 设定优先权，你可以在0到32767中间选一个数字给他。或是在 /etc/fstab 里面加上 pri=[value] ([value]就是0~32767中间一个数字)，然后你就可以很方便的直接使用 swapon -a 来启动他们，而且有优先权设定。

swapon 是开启swap.

相对的,便有一个关闭swap的指令,swapoff.


















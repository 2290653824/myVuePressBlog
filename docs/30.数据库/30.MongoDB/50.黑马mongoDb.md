操作数据库

![image-20230819125646474](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230819125646474.png)

连接mongodb服务器

```shell
mongo --host=地址 --port=端口
```



常用的基本命令

创建数据库

```
use 数据库
use articledb
```

注意，只要在新建的库中实际上有操作了后，才会真正创建此数据库。

为什么呢？因为此时的库是创建在内存中的，而show dbs展示的是磁盘当中的库，只有我们在新建的库当中创建了新的文档后，才会持久化到磁盘。



没有则创建，有则使用

```shell
show dbs //展示当前有哪些库
show databases

db //展示当前正在使用的库，默认在test库
```

默认的三个库有什么作用？

![image-20230819131305645](https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230819131305645.png)

删除数据库

```shell
db.dropDatabase()  删除当前库 
```





### 集合

创建

显示创建

`db.creatCollection("名字")`



隐式创建：向某一个集合中插入文档，集合存在则插入，不存在则创建一个集合并插入



集合的删除

`db.集合名.drop();`



### 文档

文档的插入(隐式创建集合)

`db.集合名.insert({json格式})`



`db.集合名.insertMany('[{},{},{}]')`



文档的查询

`db.集合名.find()`  返回集合中所有数据



db.集合名.find(json) 根据具体条件进行查询



db.集合名.findOne(json) 根据条件查询，并只返回一条数据



投影查询：

什么是投影查询，mongo数据查询默认会显示所有的数据，就像select * ，我们怎么指定想要显示的字段呢？

db.集合名.find({条件},{userid:1,_id:0})

这样，就仅仅会显示userid字段



文档的批量插入注意点。需要注入的是，当我们插入多条数据，如果其中某一条插入失败，mongo是不支持回滚的，这个时候我们可以使用try catch语句，捕捉异常

```shell
try{
	db.collection.insertMany()
}catch(e){
	print(e)
}
```





文档的更新：

`db.collection.updata(query,update,options)`

TODO





### 文档的删除







## 分页查询



